# Specify version format
version: "{build}"

# Operating system (build VM template)
os: Visual Studio 2015

# scripts to run before build
before_build:
  - cmd: dir

install:
  - md deps
  - nuget install zlib-msvc14-x64-master -Version 1.2.8.4 -Source https://ci.appveyor.com/nuget/zlib-shallow-x0n34b3pfq1b
  - ps: move zlib*\* deps -force
  - move deps\zlibstatic.lib deps\zlib.lib
  - nuget install libpng-msvc14-x64-master -Version 1.6.18.44 -Source https://ci.appveyor.com/nuget/libpng-7hwq4pmmrc48
  - ps: move libpng*\* deps -force
  - move deps\libpng16_static.lib deps\png.lib
  - cmd: cmake -DZLIB_INCLUDE_DIR=deps\zlib.lib -DPNG_INCLUDE_DIR=deps\png.lib .
  - cmd: make

artifacts:
  - path: png2tile
    name: png2tile
